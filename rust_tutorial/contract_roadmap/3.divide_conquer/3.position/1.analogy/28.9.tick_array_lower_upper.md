目标：
1. 理解tick_array_lower 和 tick_array_upper区别？
为什么有时候，它们两用一个账号表示，有时候要两个账号表示？



内容：
1. 一个账号还是两个账号取决于什么？ 
示例：两个账户
EEcRGhLYn2NhSarXexcXUEZxDCDdt53jo7nfwT2bQNrZ表示tick_array_lower
running 1 test
tick_array_pda: EEcRGhLYn2NhSarXexcXUEZxDCDdt53jo7nfwT2bQNrZ
pool_id: 4xtXs8tUtGZmaBPzoVnfFDGVVBTUaSgV5CanLpSDDgJT
start_tick_index: -187200
initialized_tick_count: 0
recent_epoch: 0
tick[0]: tick=0, liquidity_gross=0, liquidity_net=0
tick[1]: tick=0, liquidity_gross=0, liquidity_net=0
tick[2]: tick=0, liquidity_gross=0, liquidity_net=0
tick[3]: tick=0, liquidity_gross=0, liquidity_net=0
tick[4]: tick=0, liquidity_gross=0, liquidity_net=0
tick[5]: tick=0, liquidity_gross=0, liquidity_net=0
tick[6]: tick=0, liquidity_gross=0, liquidity_net=0
tick[7]: tick=0, liquidity_gross=0, liquidity_net=0
tick[8]: tick=0, liquidity_gross=0, liquidity_net=0
tick[9]: tick=0, liquidity_gross=0, liquidity_net=0
tick[10]: tick=0, liquidity_gross=0, liquidity_net=0
tick[11]: tick=0, liquidity_gross=0, liquidity_net=0
tick[12]: tick=0, liquidity_gross=0, liquidity_net=0
tick[13]: tick=0, liquidity_gross=0, liquidity_net=0
tick[14]: tick=0, liquidity_gross=0, liquidity_net=0
tick[15]: tick=0, liquidity_gross=0, liquidity_net=0
tick[16]: tick=0, liquidity_gross=0, liquidity_net=0
tick[17]: tick=0, liquidity_gross=0, liquidity_net=0
tick[18]: tick=0, liquidity_gross=0, liquidity_net=0
tick[19]: tick=0, liquidity_gross=0, liquidity_net=0
tick[20]: tick=0, liquidity_gross=0, liquidity_net=0
tick[21]: tick=0, liquidity_gross=0, liquidity_net=0
tick[22]: tick=0, liquidity_gross=0, liquidity_net=0
tick[23]: tick=0, liquidity_gross=0, liquidity_net=0
tick[24]: tick=0, liquidity_gross=0, liquidity_net=0
tick[25]: tick=0, liquidity_gross=0, liquidity_net=0
tick[26]: tick=0, liquidity_gross=0, liquidity_net=0
tick[27]: tick=0, liquidity_gross=0, liquidity_net=0
tick[28]: tick=0, liquidity_gross=0, liquidity_net=0
tick[29]: tick=0, liquidity_gross=0, liquidity_net=0
tick[30]: tick=0, liquidity_gross=0, liquidity_net=0
tick[31]: tick=0, liquidity_gross=0, liquidity_net=0
tick[32]: tick=0, liquidity_gross=0, liquidity_net=0
tick[33]: tick=0, liquidity_gross=0, liquidity_net=0
tick[34]: tick=0, liquidity_gross=0, liquidity_net=0
tick[35]: tick=0, liquidity_gross=0, liquidity_net=0
tick[36]: tick=0, liquidity_gross=0, liquidity_net=0
tick[37]: tick=0, liquidity_gross=0, liquidity_net=0
tick[38]: tick=0, liquidity_gross=0, liquidity_net=0
tick[39]: tick=0, liquidity_gross=0, liquidity_net=0
tick[40]: tick=0, liquidity_gross=0, liquidity_net=0
tick[41]: tick=0, liquidity_gross=0, liquidity_net=0
tick[42]: tick=0, liquidity_gross=0, liquidity_net=0
tick[43]: tick=0, liquidity_gross=0, liquidity_net=0
tick[44]: tick=0, liquidity_gross=0, liquidity_net=0
tick[45]: tick=0, liquidity_gross=0, liquidity_net=0
tick[46]: tick=0, liquidity_gross=0, liquidity_net=0
tick[47]: tick=0, liquidity_gross=0, liquidity_net=0
tick[48]: tick=0, liquidity_gross=0, liquidity_net=0
tick[49]: tick=-184260, liquidity_gross=0, liquidity_net=0
tick[50]: tick=0, liquidity_gross=0, liquidity_net=0
tick[51]: tick=0, liquidity_gross=0, liquidity_net=0
tick[52]: tick=0, liquidity_gross=0, liquidity_net=0
tick[53]: tick=0, liquidity_gross=0, liquidity_net=0
tick[54]: tick=0, liquidity_gross=0, liquidity_net=0
tick[55]: tick=0, liquidity_gross=0, liquidity_net=0
tick[56]: tick=0, liquidity_gross=0, liquidity_net=0
tick[57]: tick=0, liquidity_gross=0, liquidity_net=0
tick[58]: tick=0, liquidity_gross=0, liquidity_net=0
tick[59]: tick=0, liquidity_gross=0, liquidity_net=0


BsJJjEvxfUU4fo6tA34rzgMyaZivgSiSm7mWe2NEVta 表示tick_array_upper
running 1 test
tick_array_pda: BsJJjEvxfUU4fo6tA34rzgMyaZivgSiSm7mWe2NEVta
pool_id: 4xtXs8tUtGZmaBPzoVnfFDGVVBTUaSgV5CanLpSDDgJT
start_tick_index: -176400
initialized_tick_count: 0
recent_epoch: 0
tick[0]: tick=0, liquidity_gross=0, liquidity_net=0
tick[1]: tick=0, liquidity_gross=0, liquidity_net=0
tick[2]: tick=0, liquidity_gross=0, liquidity_net=0
tick[3]: tick=0, liquidity_gross=0, liquidity_net=0
tick[4]: tick=0, liquidity_gross=0, liquidity_net=0
tick[5]: tick=0, liquidity_gross=0, liquidity_net=0
tick[6]: tick=0, liquidity_gross=0, liquidity_net=0
tick[7]: tick=0, liquidity_gross=0, liquidity_net=0
tick[8]: tick=0, liquidity_gross=0, liquidity_net=0
tick[9]: tick=0, liquidity_gross=0, liquidity_net=0
tick[10]: tick=0, liquidity_gross=0, liquidity_net=0
tick[11]: tick=0, liquidity_gross=0, liquidity_net=0
tick[12]: tick=0, liquidity_gross=0, liquidity_net=0
tick[13]: tick=0, liquidity_gross=0, liquidity_net=0
tick[14]: tick=0, liquidity_gross=0, liquidity_net=0
tick[15]: tick=0, liquidity_gross=0, liquidity_net=0
tick[16]: tick=0, liquidity_gross=0, liquidity_net=0
tick[17]: tick=0, liquidity_gross=0, liquidity_net=0
tick[18]: tick=0, liquidity_gross=0, liquidity_net=0
tick[19]: tick=0, liquidity_gross=0, liquidity_net=0
tick[20]: tick=0, liquidity_gross=0, liquidity_net=0
tick[21]: tick=0, liquidity_gross=0, liquidity_net=0
tick[22]: tick=0, liquidity_gross=0, liquidity_net=0
tick[23]: tick=0, liquidity_gross=0, liquidity_net=0
tick[24]: tick=0, liquidity_gross=0, liquidity_net=0
tick[25]: tick=0, liquidity_gross=0, liquidity_net=0
tick[26]: tick=0, liquidity_gross=0, liquidity_net=0
tick[27]: tick=0, liquidity_gross=0, liquidity_net=0
tick[28]: tick=0, liquidity_gross=0, liquidity_net=0
tick[29]: tick=0, liquidity_gross=0, liquidity_net=0
tick[30]: tick=0, liquidity_gross=0, liquidity_net=0
tick[31]: tick=0, liquidity_gross=0, liquidity_net=0
tick[32]: tick=0, liquidity_gross=0, liquidity_net=0
tick[33]: tick=0, liquidity_gross=0, liquidity_net=0
tick[34]: tick=0, liquidity_gross=0, liquidity_net=0
tick[35]: tick=0, liquidity_gross=0, liquidity_net=0
tick[36]: tick=0, liquidity_gross=0, liquidity_net=0
tick[37]: tick=0, liquidity_gross=0, liquidity_net=0
tick[38]: tick=0, liquidity_gross=0, liquidity_net=0
tick[39]: tick=0, liquidity_gross=0, liquidity_net=0
tick[40]: tick=0, liquidity_gross=0, liquidity_net=0
tick[41]: tick=0, liquidity_gross=0, liquidity_net=0
tick[42]: tick=0, liquidity_gross=0, liquidity_net=0
tick[43]: tick=0, liquidity_gross=0, liquidity_net=0
tick[44]: tick=0, liquidity_gross=0, liquidity_net=0
tick[45]: tick=0, liquidity_gross=0, liquidity_net=0
tick[46]: tick=0, liquidity_gross=0, liquidity_net=0
tick[47]: tick=0, liquidity_gross=0, liquidity_net=0
tick[48]: tick=0, liquidity_gross=0, liquidity_net=0
tick[49]: tick=0, liquidity_gross=0, liquidity_net=0
tick[50]: tick=0, liquidity_gross=0, liquidity_net=0
tick[51]: tick=0, liquidity_gross=0, liquidity_net=0
tick[52]: tick=-173280, liquidity_gross=0, liquidity_net=0
tick[53]: tick=0, liquidity_gross=0, liquidity_net=0
tick[54]: tick=0, liquidity_gross=0, liquidity_net=0
tick[55]: tick=0, liquidity_gross=0, liquidity_net=0
tick[56]: tick=0, liquidity_gross=0, liquidity_net=0
tick[57]: tick=0, liquidity_gross=0, liquidity_net=0
tick[58]: tick=0, liquidity_gross=0, liquidity_net=0
tick[59]: tick=0, liquidity_gross=0, liquidity_net=0


/target/release/client open-position 0.00001 0.00003 --is-base-0 100
Starting...
Opening position with parameters:
- Lower price: 0.00001
- Upper price: 0.00003
- Is base token 0: true
- Input amount: 100
- With metadata: false

Pool information:
- Pool ID: 4xtXs8tUtGZmaBPzoVnfFDGVVBTUaSgV5CanLpSDDgJT
- Token 0: So11111111111111111111111111111111111111112
- Token 1: 7CWHJyvgu92Q9epFtV9ikcGnNWjHDPxXG815TeTob9P3
- Current sqrt price: 583337266871351552
- Current tick: -69082

[DEBUG] Key CLMM Params:
tickSpacing: 60
tickArraySize: 60
tickLower (index): -184260
tickUpper (index): -173280
tickArrayLowerStartIndex: -187200
tickArrayUpperStartIndex: -176400

Tick array indices:
- Lower array start index: -187200
- Upper array start index: -176400

Calculated amounts:
- Amount 0: 0
- Amount 1: 0
- Liquidity: 0

Amounts with slippage:
- Amount 0 with slippage: 0
- Amount 1 with slippage: 0

Transfer fees:
- Transfer fee 0: 0
- Transfer fee 1: 0

Maximum amounts (including fees):
- Max amount 0: 0
- Max amount 1: 0

Tick array indices:
- Lower array start index: -187200
- Upper array start index: -176400

Found 13 existing positions

No existing position found, creating new position...
- New NFT mint address: 5UPGwrXdgWjzXdWsph6tbjP71xcDy52T4G3edYTCEVnP
- Tick array bitmap extension: 8vJVoQiwL5AYxU5kmzDbLNvXcv6nk4aEzCSa76WRvvNW

Sending transaction...
Transaction signature: 5kM2G1rdojTKyyfDV3LKm9pKiDSEijYwuDiksfS8wpabVmfcrxXMehN6tjWn4PD8YwkFCVBZ8Nr6GG5YNDfsz9W9




解释：
tick_array_lower: 存储位置下边界（lower tick）所在的 tick array
tick_array_upper: 存储位置上边界（upper tick）所在的 tick array


功能区别
每个 tick array 负责管理一个连续的 tick 范围（通常是60个tick），包含：
start_tick_index: 该数组的起始tick索引
ticks: 60个tick的状态数组
initialized_tick_count: 已初始化的tick数量

一个账号还是两个账号取决于什么？
关键因素：tick_array_start_index 是否相同
// 你的位置参数
tickLower (index): -184260
tickUpper (index): -173280
tickArrayLowerStartIndex: -187200  // 下边界所在的tick array起始索引
tickArrayUpperStartIndex: -176400  // 上边界所在的tick array起始索引

情况1：两个不同的账号
tick_array_lower: EEcRGhLYn2NhSarXexcXUEZxDCDdt53jo7nfwT2bQNrZ
- start_tick_index: -187200
- 包含tick -184260 (在tick[49]位置)

tick_array_upper: BsJJjEvxfUU4fo6tA34rzgMyaZivgSiSm7mWe2NEVta  
- start_tick_index: -176400
- 包含tick -173280 (在tick[52]位置)

为什么是两个账号？
-187200 ≠ -176400，所以需要两个不同的 tick array 账号
每个账号管理不同的tick范围



情况2：一个账号
当 tick_array_lower_start_index == tick_array_upper_start_index 时，代码会复用同一个账号：
// 在 open_position 函数中
let tick_array_upper_loader =
    if tick_array_lower_start_index == tick_array_upper_start_index {
        // 如果起始索引相同，复用lower的账号
        AccountLoad::<TickArrayState>::try_from(&tick_array_upper_loader.to_account_info())?
    } else {
        // 如果起始索引不同，创建/加载不同的账号
        TickArrayState::get_or_create_tick_array(...)?
    };