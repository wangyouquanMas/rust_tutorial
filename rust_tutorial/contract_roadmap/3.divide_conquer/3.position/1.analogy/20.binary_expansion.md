### 公式来源：二进制小数的位权展开（binary expansion）

- 对任意 \(L \in [0,1)\)，存在二进制小数展开
  \[
  L \;=\; \sum_{i=1}^{\infty} b_i\,2^{-i}, \quad b_i \in \{0,1\}.
  \]
  这是“按位计数法”（positional numeral system）在基数 2 下的标准表示。

- 递推/构造证明（逐位取整）：
  1) 取 \(b_1=\lfloor 2L \rfloor\)，令余数 \(r_1=2L-b_1 \in [0,1)\)。则
     \[
     L \;=\; \frac{b_1}{2} + \frac{r_1}{2}.
     \]
  2) 取 \(b_2=\lfloor 2r_1 \rfloor\)，\(r_2=2r_1-b_2 \in [0,1)\)。代回得
     \[
     L \;=\; \frac{b_1}{2} + \frac{b_2}{2^2} + \frac{r_2}{2^2}.
     \]
  3) 归纳：得到
     \[
     L \;=\; \sum_{i=1}^{n} b_i\,2^{-i} \;+\; r_n\,2^{-n},\quad r_n\in[0,1).
     \]
     当 \(n\to\infty\) 时，\(r_n\,2^{-n}\to 0\)，于是得到无限级的位权和。

- 唯一性说明：
  - 除了“二的负幂有理数”（dyadic rationals，如 \(k/2^m\)）外表示唯一；
  - 这类数有两种等价表示（如 \(0.1_2 = 0.0111\ldots_2\)）。

- 与算法关系：
  - 每轮判断的 \(b_i = \lfloor 2^i L \rfloor - 2\lfloor 2^{i-1} L \rfloor\) 等价于“2L 是否跨过 1”（代码用 \(r^2\ge 2\) 实现），从而逐位输出 \(b_i\)。

- 在 Q64 固定点下：位值 \(2^{-i}\) 映射为整数位权 \(2^{64-i}\)，所以累加的是 `bit`（即 \(2^{64-i}\)）对应的那一位。

- 小结
  - 公式来自二进制位权表示的标准构造；
  - 通过“放大两倍+取整+归一化”的递推得到每一位 \(b_i\)，收敛到上述和式。

- 做了什么
  - 给出二进制小数展开的构造来源与简洁证明，并连接到你代码中的按位提取过程。